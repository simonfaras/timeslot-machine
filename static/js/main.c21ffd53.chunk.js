(this["webpackJsonptimeslot-machine"]=this["webpackJsonptimeslot-machine"]||[]).push([[0],{25:function(t,e,n){},26:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var c=n(6),a=n.n(c),r=n(19),i=n.n(r),s=(n(25),n(4)),o=n(7),u=n(8),l=n(2),d=(n(26),n(9)),j=n.n(d),b=n(20),m=n.n(b),O=n(15),f=n.n(O),h=function(t){return t},v=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,a=Object(c.useState)(t),r=Object(u.a)(a,2),i=r[0],s=r[1];return Object(c.useEffect)((function(){var t=localStorage.getItem(e);t&&s(n(JSON.parse(t)))}),[e,n]),Object(c.useEffect)((function(){localStorage.setItem(e,JSON.stringify(i))}),[i,s,e]),[i,s]},p=n(0),x=function(t){var e=t.onChange,n=t.start,c=t.end,a=t.activity;return Object(p.jsx)("form",{onSubmit:function(t){t.preventDefault();var n=Array.from(t.target.elements).filter((function(t){return"INPUT"===t.nodeName})).reduce((function(t,e){return Object(l.a)(Object(l.a)({},t),{},Object(o.a)({},e.name,e.value))}),{});e(n),t.target.reset(),t.target[0].focus()},children:Object(p.jsxs)("div",{className:"entry entry-input",children:[Object(p.jsxs)("div",{className:"timespan",children:[Object(p.jsx)("input",{type:"time",name:"start",defaultValue:n,required:!0}),Object(p.jsx)("span",{className:"separator",children:"-"}),Object(p.jsx)("input",{type:"time",name:"end",defaultValue:c,required:!0})]}),Object(p.jsxs)("div",{className:"description",children:[Object(p.jsx)("input",{type:"text",name:"activity",defaultValue:a,required:!0}),Object(p.jsx)("button",{type:"submit",children:"Spara"})]})]})})},y=["S\xf6ndag","M\xe5ndag","Tisdag","Onsdag","Torsdag","Fredag","L\xf6rdag"],g=function(t){return"".concat(y[t.getDay()]," - ").concat(j()(t,"d/M"))},N=function(t){return t.reduce((function(t,e){return t+function(t){var e=t.start,n=t.end,c=new Date("2020-01-01 ".concat(e));return new Date("2020-01-01 ".concat(n))-c}(e)}),0)},w=function(t){var e=t/1e3/60;return"".concat(Math.floor(e/60)," tim ").concat(e%60," min")},D=function(t,e,n){return t.map((function(t){return t.activity})).lastIndexOf(e.activity)===n},C=function(t,e){return N(e.filter((function(e){return e.activity===t})))/1e3/60/60},k=function(t){return"lunch"===t.activity.toLowerCase()},S=function(t){return t.map((function(t){return Object(l.a)(Object(l.a)({},t),{},{date:m()(t.date)})}))},F=function(){var t=v({lunchDuration:"30",workdayHours:"8"},"settings"),e=Object(u.a)(t,2),n=e[0],a=e[1],r=v([],"days",S),i=Object(u.a)(r,2),d=i[0],b=i[1],m=Object(c.useState)(null),O=Object(u.a)(m,2),h=O[0],y=O[1],F=function(t,e){return a((function(n){return Object(l.a)(Object(l.a)({},n),{},Object(o.a)({},t,e))}))},H=function(t,e){var c=e.slice(0),a=j()(t,"yyyy-MM-dd");if(!c.find((function(t){return k(t)}))){var r=new Date("".concat(a," 12:00")),i=f()(new Date(r),{minutes:n.lunchDuration});c.push({activity:"lunch",start:j()(r,"HH:mm"),end:j()(i,"HH:mm")})}var s=Number.parseInt(n.lunchDuration),o=c.find((function(t){return k(t)}));o&&(s=(new Date("".concat(a," ").concat(o.end))-new Date("".concat(a," ").concat(o.start)))/1e3/60);var u=f()(new Date("".concat(a," ").concat(c[0].start)),{minutes:Math.floor(60*n.workdayHours)+s});return j()(u,"HH:mm")},I=new Date(Date.now());return Object(p.jsx)("div",{className:"root",children:Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)("div",{className:"controls-wrapper",children:Object(p.jsxs)("div",{className:"controls",children:[d.length>0&&Object(p.jsx)("button",{onClick:function(){window.confirm("Ta bort allt?")&&b([])},children:"Rensa\xa0allt"}),Object(p.jsxs)("div",{className:"input-wrapper",children:[Object(p.jsx)("label",{htmlFor:"lunch-duration",children:"Lunch\xa0(min):"}),Object(p.jsx)("input",{type:"number",id:"lunch-duration",value:n.lunchDuration,onChange:function(t){return F("lunchDuration",t.target.value)}})]}),Object(p.jsxs)("div",{className:"input-wrapper",children:[Object(p.jsx)("label",{htmlFor:"workday-hours",children:"Arbetstid\xa0(timmar):"}),Object(p.jsx)("input",{type:"number",id:"workday-hours",value:n.workdayHours,onChange:function(t){return F("workdayHours",t.target.value)}})]})]})}),d.map((function(t,e,n){var c=t.date,a=t.timeslots;return Object(p.jsxs)("div",{className:"day",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("span",{className:"title",children:g(c)}),Object(p.jsxs)("div",{className:"summary-wrapper",children:[Object(p.jsx)("span",{className:"summary",children:w(N(a.filter((function(t){return!k(t)}))))}),a.length>0&&Object(p.jsx)("span",{className:"summary",children:H(c,a)})]})]}),a.map((function(t,n,r){return function(t,e){return t===(null===h||void 0===h?void 0:h.date)&&e===(null===h||void 0===h?void 0:h.timeslotIndex)}(c,n)?Object(p.jsx)(x,Object(l.a)({onChange:function(t){return function(t,e,n){b((function(c){return[].concat(Object(s.a)(c.slice(0,t)),[Object(l.a)(Object(l.a)({},c[t]),{},{timeslots:[].concat(Object(s.a)(c[t].timeslots.slice(0,e)),[n],Object(s.a)(c[t].timeslots.slice(e+1)))})],Object(s.a)(c.slice(t+1)))})),y(null)}(e,n,t)}},t),t.start):Object(p.jsxs)("div",{className:"entry",children:[Object(p.jsxs)("div",{className:"timespan",children:[t.start,"\xa0-\xa0",t.end]}),Object(p.jsxs)("div",{className:"description",children:[t.activity,D(r,t,n)&&Object(p.jsxs)("span",{className:"entry-summary",children:["(",C(t.activity,a).toFixed(2),")"]})]}),Object(p.jsxs)("div",{className:"entry-controls",children:[Object(p.jsx)("button",{className:"entry-control edit",onClick:function(){return y({date:c,timeslotIndex:n})}}),Object(p.jsx)("button",{className:"entry-control delete",onClick:function(){return function(t,e){b((function(n){return[].concat(Object(s.a)(n.slice(0,t)),[Object(l.a)(Object(l.a)({},n[t]),{},{timeslots:[].concat(Object(s.a)(n[t].timeslots.slice(0,e)),Object(s.a)(n[t].timeslots.slice(e+1)))})],Object(s.a)(n.slice(t+1)))}))}(e,n)}})]})]},t.start)})),e===n.length-1&&Object(p.jsx)(x,{onChange:function(t){return function(t,e){b((function(n){return[].concat(Object(s.a)(n.slice(0,t)),[Object(l.a)(Object(l.a)({},n[t]),{},{timeslots:[].concat(Object(s.a)(n[t].timeslots),[e])})],Object(s.a)(n.slice(t+1)))}))}(e,t)}})]},c)})),!d.some((function(t){return function(t){return I.getFullYear()===t.getFullYear()&&I.getMonth()===t.getMonth()&&I.getDate()===t.getDate()}(t.date)}))&&Object(p.jsx)("button",{className:"add-today",onClick:function(){return t=I,b((function(e){return[].concat(Object(s.a)(e),[{date:t,timeslots:[]}])}));var t},children:g(I)})]})})},H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,54)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),c(t),a(t),r(t),i(t)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(F,{})}),document.getElementById("root")),H()}},[[53,1,2]]]);
//# sourceMappingURL=main.c21ffd53.chunk.js.map